import React from 'react';
import { ActivoFisico } from '../../types/ActivoFisico';

interface Props {
  filterEstado: string;
  filterFabricante: string;
  filterZona: string;
  onEstadoChange: (estado: string) => void;
  onFabricanteChange: (fabricante: string) => void;
  onZonaChange: (zona: string) => void;
  activos: ActivoFisico[];
}

const FiltrosActivos: React.FC<Props> = ({
  filterEstado,
  filterFabricante,
  filterZona,
  onEstadoChange,
  onFabricanteChange,
  onZonaChange,
  activos
}) => {
  // Obtener valores únicos para los filtros
  const estados = Array.from(new Set(activos.map(a => a.estado))).sort();
  const fabricantes = Array.from(new Set(activos.map(a => a.fabricante))).sort();
  const zonas = Array.from(new Set(
    activos.map(a => a.ubicacion.split(' - ')[0]) // Extraer solo la parte principal de la ubicación
  )).sort();

  return (
    <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
      {/* Filtro por Estado */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Estado
        </label>
        <select
          value={filterEstado}
          onChange={(e) => onEstadoChange(e.target.value)}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-petroecuador-light"
        >
          <option value="">Todos los estados</option>
          {estados.map((estado) => (
            <option key={estado} value={estado}>
              {estado}
            </option>
          ))}
        </select>
      </div>

      {/* Filtro por Fabricante */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Fabricante
        </label>
        <select
          value={filterFabricante}
          onChange={(e) => onFabricanteChange(e.target.value)}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-petroecuador-light"
        >
          <option value="">Todos los fabricantes</option>
          {fabricantes.map((fabricante) => (
            <option key={fabricante} value={fabricante}>
              {fabricante}
            </option>
          ))}
        </select>
      </div>

      {/* Filtro por Zona */}
      <div>
        <label className="block text-sm font-medium text-gray-700 mb-2">
          Zona
        </label>
        <select
          value={filterZona}
          onChange={(e) => onZonaChange(e.target.value)}
          className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-petroecuador-light"
        >
          <option value="">Todas las zonas</option>
          {zonas.map((zona) => (
            <option key={zona} value={zona}>
              {zona}
            </option>
          ))}
        </select>
      </div>
    </div>
  );
};

export default FiltrosActivos;
